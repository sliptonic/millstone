O<probe_hole> sub
G21 F400

#1000=50 ;max radius

G91 G38.3 Z.00001
#1001=#5061
#1002=#5062

G91 G38.2 X#1000
#1003=#5061
G90 G0 X#1001
G91 G38.2 X[0-#1000]
#1004=#5061
#1001=[[#1003+#1004]/2]
G90 G0 X#1001

G91 G38.2 Y#1000
#1005=#5062
G90 G0 Y#1002
G91 G38.2 Y[0-#1000]
#1006=#5062
#1002=[[#1005+#1006]/2]
G90 G0 Y#1002


G91 G38.2 X#1000
#1003=#5061
G90 G0 X#1001
G91 G38.2 X[0-#1000]
#1004=#5061
#1001=[[#1003+#1004]/2]
G90 G0 X#1001

G91 G38.2 Y#1000
#1005=#5062
G90 G0 Y#1002
G91 G38.2 Y[0-#1000]
#1006=#5062
#1002=[[#1005+#1006]/2]
G90 G0 Y#1002


F5

G90 G0 X[#1003-0.5]
G91 G38.2 X1
#1003=#5061
G90 G0 X[#1004+0.5]
G91 G38.2 X-1
#1004=#5061
#1001=[[#1003+#1004]/2]
G90 G0 X#1001

G90 G0 Y[#1005-0.5]
G91 G38.2 Y1
#1005=#5062
G90 G0 Y[#1006+0.5]
G91 G38.2 Y-1
#1006=#5062
#1002=[[#1005+#1006]/2]
G90 G0 Y#1002

#1007=[#1003-#1004+[2]]
#1008=[#1005-#1006+[2]]
#1009=[[#1007+#1008]/2]
#1010=[atan[#1002]/[#1001]]
#1011=[sqrt[[#1001*#1001]+[#1002*#1002]]]

(debug,Xdia #1007 Ydia #1008 Dia #1009 Ang #1010 Dist #1011)
O<probe_hole> endsub
M2
